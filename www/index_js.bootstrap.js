"use strict";(self.webpackChunkcreate_wasm_app=self.webpackChunkcreate_wasm_app||[]).push([[237],{92:(t,e,_)=>{var n=_(881);t.exports=_.v(e,t.id,"3e10b8940ed6cc93d72b",{"./lib_simulation_wasm_bg.js":{__wbg_animal_unwrap:n.Qi,__wbg_food_unwrap:n.cA,__wbg_predator_unwrap:n.hp,__wbg_food_new:n.Zk,__wbg_animal_new:n.rB,__wbg_predator_new:n.eT,__wbg_crypto_574e78ad8b13b65f:n.CB,__wbindgen_is_object:n.qv,__wbg_process_dc0fbacc7c1c06f7:n.x2,__wbg_versions_c01dfd4722a88165:n.Kw,__wbg_node_905d3e251edff8a2:n.lU,__wbindgen_is_string:n.Gu,__wbg_require_60cc747a6bc5215a:n.mE,__wbindgen_is_function:n.PR,__wbindgen_string_new:n.yc,__wbg_msCrypto_a61aeb35a24c1329:n.Fx,__wbg_randomFillSync_ac0988aba3254290:n.IZ,__wbg_getRandomValues_b8f5dbd5f3995a9e:n.ty,__wbg_newnoargs_105ed471475aaf50:n.Vr,__wbg_call_672a4d21634d4a24:n.wH,__wbindgen_is_undefined:n.vU,__wbg_call_7cccdd69e0791ae2:n.w9,__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0:n.w6,__wbg_static_accessor_SELF_37c5d418e4bf5819:n.fb,__wbg_static_accessor_WINDOW_5de37043a91a9c40:n.x0,__wbg_static_accessor_GLOBAL_88a902d13a557d07:n.ii,__wbg_buffer_609cc3eee51ed158:n.FH,__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:n.hI,__wbg_new_a12002a7f91c75be:n.vV,__wbg_set_65595bdd868b3009:n.HB,__wbg_newwithlength_a381634e90c276d4:n.Ht,__wbg_subarray_aa9065fa9dc5df96:n.TO,__wbindgen_throw:n.Qn,__wbindgen_memory:n.Py,__wbindgen_init_externref_table:n.bL}})},237:(t,e,_)=>{_.a(t,async(t,n)=>{try{_.r(e);var r=_(783),i=t([r]);r=(i.then?(await i)():i)[0];const s=.012,a=.016;function o(t){const e=t>>>0;return`rgba(${e>>>24&255},${e>>>16&255},${e>>>8&255},${(255&e)/255})`}CanvasRenderingContext2D.prototype.drawTriangle=function(t,e,_,n){this.beginPath(),this.moveTo(t-Math.sin(n)*_*1.5,e+Math.cos(n)*_*1.5),this.lineTo(t-Math.sin(n+2/3*Math.PI)*_,e+Math.cos(n+2/3*Math.PI)*_),this.lineTo(t-Math.sin(n+4/3*Math.PI)*_,e+Math.cos(n+4/3*Math.PI)*_),this.lineTo(t-Math.sin(n)*_*1.5,e+Math.cos(n)*_*1.5),this.fill()},CanvasRenderingContext2D.prototype.drawCircle=function(t,e,_){this.beginPath(),this.arc(t,e,_,0,2*Math.PI),this.fillStyle="rgb(255, 255, 255)",this.fill()};const g=new r.gc,c=[],w=document.getElementById("genValue"),d=document.getElementById("preyMin"),u=document.getElementById("preyMax"),l=document.getElementById("preyAvg"),b=document.getElementById("preyDead"),p=document.getElementById("predMin"),f=document.getElementById("predMax"),h=document.getElementById("predAvg"),y=document.getElementById("statsHistory");function m(t){return Number(t).toFixed(2)}function x(t){if(!t)return;const e=Number(t.generation),_=m(t.prey_min_fitness),n=m(t.prey_max_fitness),r=m(t.prey_avg_fitness),i=Number(t.prey_dead),s=m(t.predator_min_fitness),a=m(t.predator_max_fitness),o=m(t.predator_avg_fitness);w.textContent=e,d.textContent=_,u.textContent=n,l.textContent=r,b.textContent=i,p.textContent=s,f.textContent=a,h.textContent=o,c.unshift({generation:e,preyAvg:r,predAvg:o,preyDead:i}),y.textContent="";for(const t of c){const e=document.createElement("li");e.className="history-entry";const _=document.createElement("span");_.textContent="Gen";const n=document.createElement("span");n.className="num",n.textContent=t.generation;const r=document.createElement("span");r.className="history-prey num",r.textContent=t.preyAvg;const i=document.createElement("span");i.className="history-pred num",i.textContent=t.predAvg;const s=document.createElement("span");s.className="history-gap";const a=document.createElement("span");a.textContent="deaths";const o=document.createElement("span");o.className="num",o.textContent=t.preyDead,e.appendChild(_),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(s),e.appendChild(a),e.appendChild(o),y.appendChild(e)}}document.getElementById("train").onclick=function(){const t=parseInt(document.getElementById("fastForwardCount").value)||1;for(let e=0;e<t;e++)x(g.fast_forward())};const v=document.getElementById("viewport"),C=v.width,I=v.height,E=window.devicePixelRatio||1;v.width=C*E,v.height=I*E,v.style.width=C+"px",v.style.height=I+"px";const F=v.getContext("2d");function B(){F.clearRect(0,0,C,I);const t=g.step();t&&x(t);const e=g.world();for(const t of e.foods)F.drawCircle(t.x*C,t.y*I,s/2*C);for(const t of e.animals)t.alive&&(F.fillStyle=o(t.color),F.drawTriangle(t.x*C,t.y*I,s*C,t.rotation));for(const t of e.predators)t.alive&&(F.fillStyle=o(t.color),F.drawTriangle(t.x*C,t.y*I,a*C,t.rotation));requestAnimationFrame(B)}F.scale(E,E),F.fillStyle="rgb(0, 0, 0)",B(),n()}catch(R){n(R)}})},783:(t,e,_)=>{_.a(t,async(t,n)=>{try{_.d(e,{gc:()=>i.gc});var r=_(92),i=_(881),s=t([r]);r=(s.then?(await s)():s)[0],(0,i.lI)(r),r.__wbindgen_start(),n()}catch(t){n(t)}})},881:(t,e,_)=>{let n;function r(t){n=t}function i(t){const e=n.__externref_table_alloc();return n.__wbindgen_export_2.set(e,t),e}function s(t,e){try{return t.apply(this,e)}catch(t){const e=i(t);n.__wbindgen_exn_store(e)}}_.d(e,{CB:()=>P,FH:()=>T,Fx:()=>N,Gu:()=>rt,HB:()=>$,Ht:()=>S,IZ:()=>Q,Kw:()=>tt,PR:()=>_t,Py:()=>st,Qi:()=>M,Qn:()=>ot,TO:()=>Y,Vr:()=>j,Zk:()=>O,bL:()=>et,cA:()=>D,eT:()=>k,fb:()=>J,gc:()=>E,hI:()=>L,hp:()=>q,ii:()=>K,lI:()=>r,lU:()=>V,mE:()=>Z,qv:()=>nt,rB:()=>R,ty:()=>H,vU:()=>it,vV:()=>U,w6:()=>W,w9:()=>z,wH:()=>A,x0:()=>X,x2:()=>G,yc:()=>at});let a=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let o=null;function g(t,e){return t>>>=0,a.decode((null!==o&&0!==o.byteLength||(o=new Uint8Array(n.memory.buffer)),o).subarray(t,t+e))}function c(t){return null==t}let w=null;function d(){return(null===w||!0===w.buffer.detached||void 0===w.buffer.detached&&w.buffer!==n.memory.buffer)&&(w=new DataView(n.memory.buffer)),w}function u(t,e){t>>>=0;const _=d(),r=[];for(let i=t;i<t+4*e;i+=4)r.push(n.__wbindgen_export_2.get(_.getUint32(i,!0)));return n.__externref_drop_slice(t,e),r}let l=0;function b(t,e){const _=e(4*t.length,4)>>>0;for(let e=0;e<t.length;e++){const n=i(t[e]);d().setUint32(_+4*e,n,!0)}return l=t.length,_}const p="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>n.__wbg_animal_free(t>>>0,1));class f{static __wrap(t){t>>>=0;const e=Object.create(f.prototype);return e.__wbg_ptr=t,p.register(e,e.__wbg_ptr,e),e}static __unwrap(t){return t instanceof f?t.__destroy_into_raw():0}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,p.unregister(this),t}free(){const t=this.__destroy_into_raw();n.__wbg_animal_free(t,0)}get x(){return n.__wbg_get_animal_x(this.__wbg_ptr)}set x(t){n.__wbg_set_animal_x(this.__wbg_ptr,t)}get y(){return n.__wbg_get_animal_y(this.__wbg_ptr)}set y(t){n.__wbg_set_animal_y(this.__wbg_ptr,t)}get rotation(){return n.__wbg_get_animal_rotation(this.__wbg_ptr)}set rotation(t){n.__wbg_set_animal_rotation(this.__wbg_ptr,t)}get color(){return n.__wbg_get_animal_color(this.__wbg_ptr)>>>0}set color(t){n.__wbg_set_animal_color(this.__wbg_ptr,t)}get alive(){return 0!==n.__wbg_get_animal_alive(this.__wbg_ptr)}set alive(t){n.__wbg_set_animal_alive(this.__wbg_ptr,t)}}const h="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>n.__wbg_food_free(t>>>0,1));class y{static __wrap(t){t>>>=0;const e=Object.create(y.prototype);return e.__wbg_ptr=t,h.register(e,e.__wbg_ptr,e),e}static __unwrap(t){return t instanceof y?t.__destroy_into_raw():0}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,h.unregister(this),t}free(){const t=this.__destroy_into_raw();n.__wbg_food_free(t,0)}get x(){return n.__wbg_get_animal_x(this.__wbg_ptr)}set x(t){n.__wbg_set_animal_x(this.__wbg_ptr,t)}get y(){return n.__wbg_get_animal_y(this.__wbg_ptr)}set y(t){n.__wbg_set_animal_y(this.__wbg_ptr,t)}}const m="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>n.__wbg_generationstats_free(t>>>0,1));class x{static __wrap(t){t>>>=0;const e=Object.create(x.prototype);return e.__wbg_ptr=t,m.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,m.unregister(this),t}free(){const t=this.__destroy_into_raw();n.__wbg_generationstats_free(t,0)}get generation(){return n.__wbg_get_generationstats_generation(this.__wbg_ptr)>>>0}set generation(t){n.__wbg_set_generationstats_generation(this.__wbg_ptr,t)}get prey_min_fitness(){return n.__wbg_get_animal_y(this.__wbg_ptr)}set prey_min_fitness(t){n.__wbg_set_animal_y(this.__wbg_ptr,t)}get prey_max_fitness(){return n.__wbg_get_animal_rotation(this.__wbg_ptr)}set prey_max_fitness(t){n.__wbg_set_animal_rotation(this.__wbg_ptr,t)}get prey_avg_fitness(){return n.__wbg_get_generationstats_prey_avg_fitness(this.__wbg_ptr)}set prey_avg_fitness(t){n.__wbg_set_generationstats_prey_avg_fitness(this.__wbg_ptr,t)}get prey_dead(){return n.__wbg_get_generationstats_prey_dead(this.__wbg_ptr)>>>0}set prey_dead(t){n.__wbg_set_generationstats_prey_dead(this.__wbg_ptr,t)}get predator_min_fitness(){return n.__wbg_get_generationstats_predator_min_fitness(this.__wbg_ptr)}set predator_min_fitness(t){n.__wbg_set_generationstats_predator_min_fitness(this.__wbg_ptr,t)}get predator_max_fitness(){return n.__wbg_get_generationstats_predator_max_fitness(this.__wbg_ptr)}set predator_max_fitness(t){n.__wbg_set_generationstats_predator_max_fitness(this.__wbg_ptr,t)}get predator_avg_fitness(){return n.__wbg_get_generationstats_predator_avg_fitness(this.__wbg_ptr)}set predator_avg_fitness(t){n.__wbg_set_generationstats_predator_avg_fitness(this.__wbg_ptr,t)}get predator_dead(){return n.__wbg_get_generationstats_predator_dead(this.__wbg_ptr)>>>0}set predator_dead(t){n.__wbg_set_generationstats_predator_dead(this.__wbg_ptr,t)}}const v="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>n.__wbg_predator_free(t>>>0,1));class C{static __wrap(t){t>>>=0;const e=Object.create(C.prototype);return e.__wbg_ptr=t,v.register(e,e.__wbg_ptr,e),e}static __unwrap(t){return t instanceof C?t.__destroy_into_raw():0}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,v.unregister(this),t}free(){const t=this.__destroy_into_raw();n.__wbg_predator_free(t,0)}get x(){return n.__wbg_get_animal_x(this.__wbg_ptr)}set x(t){n.__wbg_set_animal_x(this.__wbg_ptr,t)}get y(){return n.__wbg_get_animal_y(this.__wbg_ptr)}set y(t){n.__wbg_set_animal_y(this.__wbg_ptr,t)}get rotation(){return n.__wbg_get_animal_rotation(this.__wbg_ptr)}set rotation(t){n.__wbg_set_animal_rotation(this.__wbg_ptr,t)}get color(){return n.__wbg_get_animal_color(this.__wbg_ptr)>>>0}set color(t){n.__wbg_set_animal_color(this.__wbg_ptr,t)}get alive(){return 0!==n.__wbg_get_animal_alive(this.__wbg_ptr)}set alive(t){n.__wbg_set_animal_alive(this.__wbg_ptr,t)}}const I="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>n.__wbg_simulation_free(t>>>0,1));class E{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,I.unregister(this),t}free(){const t=this.__destroy_into_raw();n.__wbg_simulation_free(t,0)}constructor(){const t=n.simulation_new();return this.__wbg_ptr=t>>>0,I.register(this,this.__wbg_ptr,this),this}world(){const t=n.simulation_world(this.__wbg_ptr);return B.__wrap(t)}step(){const t=n.simulation_step(this.__wbg_ptr);return 0===t?void 0:x.__wrap(t)}fast_forward(){const t=n.simulation_fast_forward(this.__wbg_ptr);return x.__wrap(t)}}const F="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>n.__wbg_world_free(t>>>0,1));class B{static __wrap(t){t>>>=0;const e=Object.create(B.prototype);return e.__wbg_ptr=t,F.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,F.unregister(this),t}free(){const t=this.__destroy_into_raw();n.__wbg_world_free(t,0)}get animals(){const t=n.__wbg_get_world_animals(this.__wbg_ptr);var e=u(t[0],t[1]).slice();return n.__wbindgen_free(t[0],4*t[1],4),e}set animals(t){const e=b(t,n.__wbindgen_malloc),_=l;n.__wbg_set_world_animals(this.__wbg_ptr,e,_)}get predators(){const t=n.__wbg_get_world_predators(this.__wbg_ptr);var e=u(t[0],t[1]).slice();return n.__wbindgen_free(t[0],4*t[1],4),e}set predators(t){const e=b(t,n.__wbindgen_malloc),_=l;n.__wbg_set_world_predators(this.__wbg_ptr,e,_)}get foods(){const t=n.__wbg_get_world_foods(this.__wbg_ptr);var e=u(t[0],t[1]).slice();return n.__wbindgen_free(t[0],4*t[1],4),e}set foods(t){const e=b(t,n.__wbindgen_malloc),_=l;n.__wbg_set_world_foods(this.__wbg_ptr,e,_)}}function R(t){return f.__wrap(t)}function M(t){return f.__unwrap(t)}function T(t){return t.buffer}function A(){return s(function(t,e){return t.call(e)},arguments)}function z(){return s(function(t,e,_){return t.call(e,_)},arguments)}function P(t){return t.crypto}function O(t){return y.__wrap(t)}function D(t){return y.__unwrap(t)}function H(){return s(function(t,e){t.getRandomValues(e)},arguments)}function N(t){return t.msCrypto}function U(t){return new Uint8Array(t)}function j(t,e){return new Function(g(t,e))}function L(t,e,_){return new Uint8Array(t,e>>>0,_>>>0)}function S(t){return new Uint8Array(t>>>0)}function V(t){return t.node}function k(t){return C.__wrap(t)}function q(t){return C.__unwrap(t)}function G(t){return t.process}function Q(){return s(function(t,e){t.randomFillSync(e)},arguments)}function Z(){return s(function(){return module.require},arguments)}function $(t,e,_){t.set(e,_>>>0)}function K(){const t="undefined"==typeof global?null:global;return c(t)?0:i(t)}function W(){const t="undefined"==typeof globalThis?null:globalThis;return c(t)?0:i(t)}function J(){const t="undefined"==typeof self?null:self;return c(t)?0:i(t)}function X(){const t="undefined"==typeof window?null:window;return c(t)?0:i(t)}function Y(t,e,_){return t.subarray(e>>>0,_>>>0)}function tt(t){return t.versions}function et(){const t=n.__wbindgen_export_2,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}function _t(t){return"function"==typeof t}function nt(t){return"object"==typeof t&&null!==t}function rt(t){return"string"==typeof t}function it(t){return void 0===t}function st(){return n.memory}function at(t,e){return g(t,e)}function ot(t,e){throw new Error(g(t,e))}}}]);